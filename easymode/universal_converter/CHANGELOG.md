# 更新日志

## [2.4.0] - 2025-10-25

### ✨ 新增功能
- **PNG格式支持**：通用优化模式现在支持PNG无损转换为JXL
  - 使用`cjxl -d 0`无损模式进行高效压缩
  - 自动识别并处理PNG文件
  - 支持RGBA透明通道图像
  - 压缩率可达2-50%（完全无损）

### 🔧 改进优化
- **验证系统优化**：调整PNG→JXL的文件大小验证阈值
  - 最小比例：0.05 → 0.01
  - 支持RGBA图像的高压缩率验证
  - 基于990个实战文件的测试结果

### 📊 实战验证
- 完成990个文件的完整转换测试
  - JPEG: 501个 → JXL (100%成功)
  - PNG: 360个 → JXL (100%成功)
  - GIF: 75个 → AVIF (100%成功)
  - MP4: 54个 → MOV (100%成功)
- 总节省空间：800+ MB
- 验证通过率：100%

### 🐛 问题修复
- 无

---

## [2.3.0] - 2025-10-24

### ✨ 新增功能
- **通用优化模式**（Optimized Mode）
  - 智能识别文件类型并选择最佳转换策略
  - JPEG→JXL（无损转码）
  - GIF→AVIF（动画压缩）
  - MP4→MOV（重新封装）
- **8层严格验证系统**
  - 文件存在性、大小、格式、元数据验证
  - 图像尺寸、像素级、质量指标验证
  - 反作弊验证

### 🔧 改进优化
- GIF→AVIF像素级验证跳过（格式差异容忍）
- GIF→AVIF文件大小阈值调整（0.03-5.0）
- JPEG→JXL极端压缩支持（纯色图0.01压缩率）
- MP4→MOV视频尺寸调整容忍（15%宽高比差异）

### 📊 验证改进
- 新增format-specific验证阈值
- 支持极端压缩情况（0.01-10.0范围）
- 添加详细的验证失败信息

---

## [2.2.0] - 2025-10-23

### ✨ 新增功能
- 严格验证模式（`-strict`标志）
- 视频重新封装支持（MP4→MOV）
- 并发控制和性能优化

### 🔧 改进优化
- 自动线程数检测
- 内存使用监控
- 文件大小限制

---

## [2.1.0] - 2025-10-22

### ✨ 新增功能
- 元数据保留功能（使用exiftool）
- 多种处理模式（all, static, dynamic, video）

### 🔧 改进优化
- 改进错误处理
- 添加进度显示

---

## [2.0.0] - 2025-10-21

### ✨ 新增功能
- 初始版本发布
- 支持AVIF、JXL、MOV格式转换
- 基础验证系统

---

**版本号说明**：
- 主版本号：重大架构变更
- 次版本号：新增功能
- 修订号：问题修复和小改进

