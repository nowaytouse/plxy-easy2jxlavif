# Pixly v3.1.1 快速开始

## 🚀 5分钟上手指南

### 步骤1: 编译程序
```bash
cd /Users/nyamiiko/Documents/git/plxy-easy2jxlavif
go build -o pixly_interactive cmd/pixly/main_interactive.go cmd/pixly/conversion_engine.go
```

### 步骤2: 运行程序
```bash
./pixly_interactive
```

### 步骤3: 选择功能
使用 **⬆️⬇️ 方向键**，按 **⏎ 回车** 确认

**推荐首次使用**:
```
🚀 智能转换模式（预测演示）← 先看预测，不实际转换
```

**实际转换**:
```
🎨 完整转换功能（实际转换） ← 真正转换文件
```

### 步骤4: 输入路径
- 直接拖拽文件夹到终端，或
- 粘贴完整路径，或
- 直接回车使用TESTPACK

### 步骤5: 选择模式（完整转换）
```
🔄 原地转换（替换原文件）
📁 复制到新目录
```

### 步骤6: 确认并观看
- 30秒内输入 `yes` 确认
- 观看实时转换进度
- 查看完整统计报告

---

## 📋 功能菜单

### 🚀 智能转换模式（预测演示）
**用途**: 仅预测，不实际转换  
**推荐**: 首次使用、了解系统  
**输出**: 前5个文件的预测结果

### 🎨 完整转换功能（实际转换）
**用途**: 真正执行转换  
**功能**: 
  - ✅ 完整工具检测
  - ✅ 知识库集成
  - ✅ 实时进度
  - ✅ 完整报告

### 📊 TESTPACK验证测试
**用途**: 954个文件的完整测试  
**功能**:
  - ✅ 文件统计
  - ✅ 随机抽样预测
  - ✅ 格式分布

### 🎭 UI/UX特性展示
**用途**: 演示界面特性  
**功能**:
  - ✅ 字符画
  - ✅ 动画效果
  - ✅ 进度条
  - ✅ 配色方案

### 🔍 知识库查询
**用途**: 查看学习系统状态  
**功能**: 知识库功能说明

### ⚙️ 配置管理
**用途**: 查看当前配置  
**功能**: 显示所有配置项

### 👋 退出
**用途**: 优雅退出  
**功能**: 显示告别消息

---

## 💡 使用技巧

### 路径输入
```
✅ 支持：空格、emoji、中文、日文
✅ 自动：去除引号、去除shell转义
✅ 方法：拖拽、粘贴、手动输入
```

### 交互菜单
```
⬆️⬇️  方向键：上下选择
⏎   回车键：确认选择
输入  文字：快速搜索
```

### 中断操作
```
Ctrl+C: 强制退出
超时: 30秒自动取消
```

---

## 🎨 完整功能演示

### 工具检测
```
🔧 初始化转换引擎...
🔍 检查必要工具...

工具检测结果：
┌──────────┬───────────┬──────────────────────────┐
│ 工具     │ 状态      │ 路径                      │
├──────────┼───────────┼──────────────────────────┤
│ cjxl     │ ✅ 已安装 │ /usr/local/bin/cjxl      │
│ avifenc  │ ✅ 已安装 │ /usr/local/bin/avifenc   │
│ ffmpeg   │ ✅ 已安装 │ /usr/local/bin/ffmpeg    │
│ exiftool │ ✅ 已安装 │ /usr/local/bin/exiftool  │
└──────────┴───────────┴──────────────────────────┘

✅ 所有必要工具已就绪
📊 知识库路径: /Users/nyamiiko/.pixly/knowledge.db
✅ 知识库已启用（自动学习）
✅ 引擎就绪
```

### 文件扫描
```
📂 扫描目录...
✅ 找到 954 个媒体文件

文件类型分布：
  .jpg: 855 (89.6%)
  .png: 51 (5.3%)
  .gif: 48 (5.0%)
```

### 实时转换
```
⚡ 转换过程中暂时禁用动画以提升性能

🎨 转换中 [234/954] 🔄 IMG_0234.jpg (234/954) ████ 24% | 15s
```

### 完整报告
```
━━━━━━ 📊 转换完成报告 ━━━━━━

基本统计：
┌────────────┬────────┐
│ 项目       │ 数值   │
├────────────┼────────┤
│ 总文件数   │ 954    │
│ 成功转换   │ ✅ 950 │
│ 失败       │ ❌ 4   │
│ 跳过       │ ⏭️  0  │
│ 耗时       │ 62.5秒 │
└────────────┴────────┘

空间统计：
┌────────────────┬──────────┐
│ 项目           │ 大小     │
├────────────────┼──────────┤
│ 原始总大小     │ 3.2 GB   │
│ 转换后大小     │ 1.4 GB   │
│ 节省空间       │ 1.8 GB   │
│ 节省比例       │ 56.3%    │
└────────────────┴──────────┘

📊 知识库统计：
  总记录数: 950
✅ 转换记录已保存，系统将持续学习优化

┌─────── 🎉 完美完成 ───────┐
│ 成功率: 99.6%            │
│ 节省空间: 1.8 GB (56.3%) │
│ 总耗时: 62.5秒           │
└──────────────────────────┘
```

---

## ⚠️ 重要提示

### 工具依赖
程序需要以下工具：
```bash
brew install jpeg-xl libavif ffmpeg exiftool
```

### 首次测试
**强烈建议先用副本测试！**
```bash
# 创建测试副本
cp -r /path/to/original /path/to/test_copy

# 使用副本测试
./pixly_interactive
# 输入路径: /path/to/test_copy
```

### 知识库位置
```
~/.pixly/knowledge.db

查看：
sqlite3 ~/.pixly/knowledge.db "SELECT COUNT(*) FROM conversion_records;"
```

---

## 🎊 全功能清单

### 核心引擎
- ✅ PNG → JXL (distance=0, 100%无损)
- ✅ JPEG → JXL (lossless_jpeg=1, 100%可逆)
- ✅ GIF → AVIF (动图)
- ✅ WebP → JXL/AVIF
- ✅ 视频 → MOV (重封装)

### 智能系统
- ✅ 特征提取（ffprobe）
- ✅ 智能预测（6种格式黄金规则）
- ✅ 参数调整（effort/CRF动态）
- ✅ 探索引擎（低置信度）
- ✅ 知识库学习（实时）

### 验证系统
- ✅ 文件存在性
- ✅ 大小合理性
- ✅ JXL魔术字节验证
- ✅ AVIF魔术字节验证
- ✅ 异常膨胀检测

### UI/UX
- ✅ Gemini风格字符画（渐变+材质）
- ✅ 20+个emoji（友好）
- ✅ 交互菜单（方向键）
- ✅ 稳定进度条（防刷屏）
- ✅ 6层安全检测
- ✅ 完整统计报告
- ✅ 双模式配色

### 安全特性
- ✅ 系统目录拦截
- ✅ 权限验证
- ✅ 用户确认+超时
- ✅ 备份+恢复机制
- ✅ 错误隔离（单文件失败不影响其他）

---

**现在就试试吧！完整的专业级系统已就绪！** 🎉

EOF

