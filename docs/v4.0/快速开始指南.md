# Pixly v4.0 - 快速开始指南

**版本**: v4.0.0  
**创建日期**: 2025-10-25  
**状态**: ✅ 就绪

---

## 🚀 5分钟快速开始

### 步骤1: 安装依赖

```bash
# macOS (Homebrew)
brew install ffmpeg exiftool

# Linux (Ubuntu/Debian)
sudo apt-get install ffmpeg libimage-exiftool-perl

# 验证安装
ffmpeg -version
exiftool -ver
```

### 步骤2: 克隆项目

```bash
git clone https://github.com/your-repo/pixly.git
cd pixly
```

### 步骤3: 配置

```bash
# 复制配置模板
cp config_template.yaml ~/.pixly/config.yaml

# 编辑配置（可选）
vim ~/.pixly/config.yaml
```

### 步骤4: 运行

```bash
# 编译
cd cmd/pixly
go build -o pixly

# 运行
./pixly convert /path/to/images
```

---

## 🎯 常用命令

### 基础转换

```bash
# 自动模式（推荐）
./pixly convert images/

# 指定格式
./pixly convert images/ --format jxl

# 批量处理
./pixly convert images/ --recursive --workers 8
```

### 高级选项

```bash
# 原地转换（删除原文件）
./pixly convert images/ --in-place

# 试运行（预览不实际转换）
./pixly convert images/ --dry-run

# 启用性能监控
./pixly convert images/ --monitor

# 指定语言
./pixly convert images/ --lang en-US
```

### 断点续传

```bash
# 列出所有会话
./pixly sessions list

# 恢复会话
./pixly sessions resume session_123

# 清理旧会话
./pixly sessions cleanup --older-than 30d
```

---

## 📁 归档工具快速使用

所有归档工具都位于 `easymode/archive/` 目录下，支持交互式和命令行两种模式。

### 动图转视频（推荐）

```bash
cd easymode/archive/dynamic2mov/bin

# 交互模式（无参数启动）
./dynamic2mov-darwin-arm64

# 命令行模式
./dynamic2mov-darwin-arm64 -dir /path/to/gifs --codec av1 --format mp4
```

### 动图转AVIF

```bash
cd easymode/archive/dynamic2avif/bin

# 交互模式
./dynamic2avif-darwin-arm64

# 命令行模式  
./dynamic2avif-darwin-arm64 -dir /path/to/gifs --workers 8
```

### 静图转JPEG XL

```bash
cd easymode/archive/static2jxl/bin

# 交互模式
./static2jxl-darwin-arm64

# 命令行模式
./static2jxl-darwin-arm64 -dir /path/to/photos --effort 9
```

### 视频重编码

```bash
cd easymode/archive/video2mov/bin

# 交互模式
./video2mov-darwin-arm64

# 命令行模式
./video2mov-darwin-arm64 -dir /path/to/videos --workers 4
```

---

## 🔧 配置示例

### 基础配置

```yaml
# ~/.pixly/config.yaml
project:
  name: "我的图片库"
  target_dir: "~/Pictures"
  output_dir: "~/Pictures/converted"

concurrency:
  workers: 8
  auto_adjust: true

conversion:
  default_mode: "auto"
  skip_existing: true
  preserve_metadata: true

ui:
  show_progress: true
  color_output: true
  monitoring_panel: true

language:
  default: "zh-CN"
```

### 高级配置

```yaml
# 性能优化
concurrency:
  workers: 16
  max_workers: 32
  min_workers: 4
  auto_adjust: true
  cpu_threshold: 90
  memory_threshold: 85

# 质量控制
conversion:
  quality_analysis: true
  auto_adjust_params: true
  effort_auto: true

# 断点续传
resume:
  enabled: true
  auto_save_interval: 10
  session_db: "~/.pixly/sessions.db"

# 监控
monitoring:
  enabled: true
  update_interval: 1
  save_report: true
```

---

## 📊 使用场景

### 场景1: 批量转换照片

```bash
# 将JPEG照片转换为JPEG XL（无损）
./pixly convert ~/Pictures/Photos/ \
  --format jxl \
  --quality lossless \
  --recursive \
  --workers 8
```

### 场景2: 动图压缩

```bash
# 将GIF转换为AV1 MP4
cd easymode/archive/dynamic2mov/bin
./dynamic2mov-darwin-arm64 \
  -dir ~/Pictures/GIFs/ \
  --codec av1 \
  --format mp4 \
  --workers 4
```

### 场景3: 大规模转换（带断点续传）

```bash
# 启用断点续传
./pixly convert ~/Pictures/Archive/ \
  --format jxl \
  --resume \
  --monitor \
  --workers 16

# 如果中断，恢复
./pixly sessions resume last
```

### 场景4: 质量优先转换

```bash
# 高质量转换
./pixly convert ~/Pictures/Important/ \
  --quality high \
  --effort 9 \
  --no-lossy \
  --preserve-all
```

---

## 🐛 常见问题

### Q: 转换速度慢怎么办？

```bash
# 增加并发数
./pixly convert images/ --workers 16

# 降低质量要求
./pixly convert images/ --effort 5

# 启用性能监控查看瓶颈
./pixly convert images/ --monitor
```

### Q: 如何恢复中断的任务？

```bash
# 自动恢复最近的会话
./pixly sessions resume last

# 或手动选择会话
./pixly sessions list
./pixly sessions resume session_xxx
```

### Q: 如何保留原始文件？

默认情况下原始文件会保留。如果想节省空间：

```bash
# 原地转换（删除原文件）
./pixly convert images/ --in-place
```

### Q: 如何切换语言？

```bash
# 方法1: 命令行参数
./pixly convert images/ --lang en-US

# 方法2: 环境变量
export PIXLY_LANG=en-US
./pixly convert images/

# 方法3: 配置文件
# 编辑 ~/.pixly/config.yaml
language:
  default: "en-US"
```

---

## 📚 更多文档

- [性能监控系统指南](./性能监控系统指南.md)
- [配置系统指南](./配置系统指南.md)
- [断点续传系统指南](./断点续传系统指南.md)
- [多语言支持指南](./多语言支持指南.md)
- [完整API参考](../API文档.md)

---

## 🆘 获取帮助

```bash
# 查看帮助
./pixly --help
./pixly convert --help
./pixly sessions --help

# 查看版本
./pixly --version

# 查看配置
./pixly config show
```

---

**开始使用Pixly v4.0吧！** 🚀
