# Pixly UI/UX 设计计划

**版本**: v3.1.1 UI/UX  
**日期**: 2025-10-25  
**目标**: 打造精致、现代、美观的交互式CLI

---

## 🎯 设计目标

### 核心体验

> "让复杂的媒体转换变得简单、直观、愉悦"

### 用户需求

1. **精致的交互式CLI**
   - 箭头键导航
   - 回车确认
   - ESC返回

2. **现代美观的UI**
   - 丰富的色彩
   - ASCII艺术装饰
   - 清晰的视觉层次

3. **实时反馈**
   - 动态进度条
   - 状态更新
   - 成功/失败提示

4. **详细配置**
   - YAML配置文件
   - 交互式配置生成
   - 配置验证

---

## 🎨 UI设计

### 主界面框架

```
╔═══════════════════════════════════════════════════════════════╗
║                                                               ║
║     🎨 Pixly v3.1 - 智能媒体转换专家                        ║
║                                                               ║
╚═══════════════════════════════════════════════════════════════╝

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📋 主菜单
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  → 🚀 智能转换（推荐）
    📁 批量转换
    ⚙️  配置管理
    📊 查看统计
    ❓ 帮助文档
    🚪 退出

  使用 ↑↓ 选择，Enter 确认，ESC 返回

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

💡 提示: 智能转换模式使用黄金规则，100%质量保证
```

### 转换流程界面

```
╔═══════════════════════════════════════════════════════════════╗
║     🔄 智能转换进行中...                                     ║
╚═══════════════════════════════════════════════════════════════╝

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📂 处理目录: /path/to/photos
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

扫描进度:  ████████████████████████████████ 100% (245/245)

格式分布:
  📸 PNG:  45个 (123.5 MB)
  📷 JPEG: 180个 (456.2 MB)
  🎞️  GIF:  20个 (89.7 MB)

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🔬 转换进度
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

总进度:  ████████████░░░░░░░░░░░░░░░░░░░░ 45% (110/245)

当前文件: photo_0110.png
  📊 3840×2160 | 8.5 MB
  🎯 PNG → JXL (distance=0, effort=7)
  ⏱️  转换中... [=====>    ] 50%

统计:
  ✅ 成功: 108
  ❌ 失败: 2
  ⏭️  跳过: 0
  💾 已节省: 289.4 MB (52.3%)

预计剩余时间: 2分15秒

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

💡 按 Ctrl+C 暂停，ESC 取消
```

### 结果界面

```
╔═══════════════════════════════════════════════════════════════╗
║     ✅ 转换完成！                                            ║
╚═══════════════════════════════════════════════════════════════╝

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📊 转换统计
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

总文件: 245个
  ✅ 成功: 242个 (98.8%)
  ❌ 失败: 3个 (1.2%)

空间节省:
  原始大小: 669.4 MB
  转换后: 298.7 MB
  节省: 370.7 MB (55.4%)

按格式:
  PNG:  45个 → JXL | 平均节省: 62.3%
  JPEG: 180个 → JXL | 平均节省: 28.4%
  GIF:  17个 → AVIF | 平均节省: 73.1%

转换耗时: 8分32秒
平均速度: 28.7 文件/分钟

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📋 详细日志
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

失败文件:
  ❌ corrupted_01.png: 文件损坏
  ❌ large_video.mp4: 超过大小限制
  ❌ old_format.bmp: 格式不支持

日志已保存: /path/to/pixly_conversion_20251025_143022.log
知识库已更新: +242条记录

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  [Enter] 返回主菜单    [V] 查看详细日志    [Q] 退出

```

---

## 🔧 技术实现

### 使用的库

1. **pterm** - 终端UI
   ```go
   import "github.com/pterm/pterm"
   
   // 交互式选择
   pterm.DefaultInteractiveSelect.
       WithOptions(options).
       Show()
   
   // 进度条
   pterm.DefaultProgressbar.
       WithTotal(total).
       Start()
   ```

2. **cobra** - CLI框架
   ```go
   import "github.com/spf13/cobra"
   
   rootCmd := &cobra.Command{
       Use: "pixly",
       Short: "智能媒体转换专家",
   }
   ```

3. **viper** - 配置管理
   ```go
   import "github.com/spf13/viper"
   
   viper.SetConfigName("pixly")
   viper.SetConfigType("yaml")
   ```

---

## 🎨 交互流程

### 智能转换模式

```
1. 选择目录
   ↓
2. 扫描文件（实时进度）
   ↓
3. 显示格式分布
   ↓
4. 确认转换
   ↓
5. 实时转换（进度条）
   ↓
6. 显示结果
   ↓
7. 自动保存到知识库
```

### 批量转换模式

```
1. 拖拽文件夹
   ↓
2. 选择转换策略
   - 智能模式（黄金规则）
   - 自定义格式
   - 平衡模式
   ↓
3. 配置参数（可选）
   ↓
4. 开始转换
```

---

## 📝 配置系统

### YAML配置示例

```yaml
pixly:
  version: "3.1.1"
  
  # 转换设置
  conversion:
    default_mode: "smart"  # smart, balanced, custom
    enable_knowledge: true
    enable_tuning: true
    confidence_threshold: 0.80
    
  # 并发设置
  performance:
    max_concurrent: 8
    thread_per_file: 8
    
  # 格式设置
  formats:
    png:
      target: "jxl"
      lossless: true
      effort: 7
    jpeg:
      target: "jxl"
      lossless_jpeg: true
    gif:
      animated_target: "avif"
      static_target: "jxl"
      
  # 质量设置
  quality:
    enable_validation: true
    pixel_diff_threshold: 0.01
    min_saving_threshold: 0.05
    
  # UI设置
  ui:
    theme: "default"  # default, dark, light
    show_ascii_art: true
    progress_style: "modern"  # modern, simple, minimal
    
  # 知识库设置
  knowledge:
    database_path: "./pixly_knowledge.db"
    enable_analytics: true
    cache_ttl: "1h"
```

---

## 🚀 第一步实现计划

### Phase 1: 基础CLI框架（1-2天）

1. 集成pterm、cobra、viper
2. 创建主菜单
3. 箭头键导航

### Phase 2: 核心交互（2-3天）

1. 文件/文件夹选择
2. 扫描进度显示
3. 格式分布展示

### Phase 3: 转换UI（2-3天）

1. 实时进度条
2. 当前文件状态
3. 统计信息更新

### Phase 4: 结果展示（1天）

1. 美观的结果界面
2. 详细统计
3. 日志导出

### Phase 5: 配置系统（1-2天）

1. YAML配置读取
2. 交互式配置生成
3. 配置验证

---

**总计**: 7-11天

**当前建议**: 立即开始Phase 1，创建精致的交互式CLI！

